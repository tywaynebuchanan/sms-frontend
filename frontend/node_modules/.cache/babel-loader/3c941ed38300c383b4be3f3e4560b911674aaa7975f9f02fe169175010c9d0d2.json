{"ast":null,"code":"var _jsxFileName = \"/Users/tywayne/Desktop/reactdev/sms-frontend/frontend/src/context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useIsAuthenticated, useSignIn, useSignOut } from \"react-auth-kit\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { api } from \"./api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext();\nconst AppProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const signIn = useSignIn();\n  const signOut = useSignOut();\n  const isAuthenicated = useIsAuthenticated();\n  const nagivate = useNavigate();\n  const [logged, setLogged] = useState(\"\");\n  const [getdata, setData] = useState([]);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [smessages, setMessages] = useState(\"\");\n  const [active, setActive] = useState(false);\n  const [studentId, setStudentId] = useState(\"\");\n  const [firstname, setFirstName] = useState(\"\");\n  const [middlename, setMiddleName] = useState(\"\");\n  const [lastname, setLastName] = useState(\"\");\n  const [dob, onChange] = useState(new Date());\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [roomNumber, setRoomNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [text, setSearchText] = useState(\"\");\n  const errRef = useRef();\n  const USER_URL = \"https://myauthapivone.herokuapp.com/api/login\";\n  const ADD_STUDENT = \"https://myauthapivone.herokuapp.com/api/create-student\";\n  // const Student = `https://myauthapivone.herokuapp.com/api/student/${search}`\n\n  const toastData = {\n    position: \"top-right\",\n    autoClose: 4000,\n    hideProgressBar: true,\n    closeOnClick: true,\n    pauseOnHover: false,\n    draggable: false,\n    progress: undefined,\n    theme: \"dark\"\n  };\n\n  //Get Student Data\n\n  const fetchData = async URL => {\n    setLoading(true);\n    try {\n      const data = await api.get(URL);\n      if (data.data.student) {\n        localStorage.setItem(\"studentdata\", JSON.stringify(data.data.student));\n        setData(data.data.student);\n        console.log(data);\n      } else {\n        setData([]);\n      }\n    } catch (error) {\n      setError(error.response);\n    }\n    setLoading(false);\n  };\n\n  //Get User\n\n  const fetchUser = async url => {\n    setLoading(true);\n    try {\n      const userdata = await api.get(url);\n      setLogged(userdata.data.data.user);\n    } catch (error) {\n      setLogged(\"\");\n      toast.error(error.response.data.message);\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    if (!search) return;\n    fetchData(`/student/${search}`);\n    setMessages(\" There is no student by the name of  \" + search);\n  }, [search]);\n  const ResetData = () => {\n    fetchData(\"/students\");\n    setSearch(\"\");\n  };\n  const handleLogout = async () => {\n    signOut();\n    toast.success(\"You have been logged out\", toastData);\n    nagivate(\"/\");\n  };\n  const handleStudent = async e => {\n    e.preventDefault();\n    try {\n      const student = {\n        studentId,\n        roomNumber,\n        firstname,\n        lastname,\n        middlename,\n        dob,\n        address,\n        phone\n      };\n      const addStudent = await api.post(\"/create-student\", JSON.stringify(student));\n      console.log(addStudent);\n      if (addStudent.data.status.success = \"success\") {\n        nagivate(\"/dashboard\");\n        toast.success(\"The student was added to the database!\");\n      } else {\n        toast.error(\"Unable to add student\", toastData);\n      }\n    } catch (error) {\n      console.log(error.response.data.message);\n      toast.error(error.response.data.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      toastData,\n      USER_URL,\n      signIn,\n      signOut,\n      // postData,\n      ResetData,\n      fetchData,\n      fetchUser,\n      text,\n      setSearchText,\n      setSearch,\n      search,\n      roomNumber,\n      setRoomNumber,\n      phone,\n      setPhone,\n      getdata,\n      setData,\n      setActive,\n      active,\n      setError,\n      error,\n      success,\n      email,\n      setEmail,\n      password,\n      setPassword,\n      setMessages,\n      smessages,\n      // handleLogin,\n      handleLogout,\n      errRef,\n      loading,\n      studentId,\n      firstname,\n      lastname,\n      middlename,\n      dob,\n      address,\n      setFirstName,\n      setLastName,\n      setAddress,\n      setMiddleName,\n      onChange,\n      setStudentId,\n      handleStudent,\n      fetchData,\n      logged\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_s(AppProvider, \"zyHX2WQgGr8leTm0W4tl0jPKRHc=\", false, function () {\n  return [useSignIn, useSignOut, useIsAuthenticated, useNavigate];\n});\n_c = AppProvider;\nexport const useGlobalContext = () => {\n  _s2();\n  return useContext(AppContext);\n};\n_s2(useGlobalContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { AppContext, AppProvider };\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["createContext","useContext","useState","useEffect","useRef","axios","React","useIsAuthenticated","useSignIn","useSignOut","useNavigate","toast","api","jsxDEV","_jsxDEV","AppContext","AppProvider","_ref","_s","children","signIn","signOut","isAuthenicated","nagivate","logged","setLogged","getdata","setData","email","setEmail","password","setPassword","error","setError","success","setSuccess","loading","setLoading","smessages","setMessages","active","setActive","studentId","setStudentId","firstname","setFirstName","middlename","setMiddleName","lastname","setLastName","dob","onChange","Date","address","setAddress","phone","setPhone","roomNumber","setRoomNumber","search","setSearch","text","setSearchText","errRef","USER_URL","ADD_STUDENT","toastData","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","fetchData","URL","data","get","student","localStorage","setItem","JSON","stringify","console","log","response","fetchUser","url","userdata","user","message","ResetData","handleLogout","handleStudent","e","preventDefault","addStudent","post","status","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useGlobalContext","_s2","$RefreshReg$"],"sources":["/Users/tywayne/Desktop/reactdev/sms-frontend/frontend/src/context.js"],"sourcesContent":["import {createContext, useContext, useState, useEffect, useRef} from \"react\"\nimport axios from \"axios\"\nimport React from \"react\"\nimport { useIsAuthenticated, useSignIn, useSignOut } from \"react-auth-kit\"\nimport {useNavigate } from \"react-router-dom\"\nimport {toast} from \"react-toastify\"\nimport {api} from \"./api/api\"\n\nconst AppContext = createContext()\n\nconst AppProvider = ({children}) => {\n  \n  const signIn = useSignIn();\n  const signOut = useSignOut();\n const isAuthenicated = useIsAuthenticated();\n const nagivate = useNavigate();\n  const [logged,setLogged] = useState(\"\")\n  const [getdata,setData] = useState([])\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [error, setError] = useState(false)\n  const [success, setSuccess] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [smessages, setMessages] = useState(\"\")\n  const [active, setActive] = useState(false)\n  const [studentId, setStudentId] = useState(\"\")\n  const [firstname, setFirstName] = useState(\"\")\n  const [middlename, setMiddleName] = useState(\"\")\n  const [lastname, setLastName] = useState(\"\")\n  const [dob, onChange] = useState(new Date())\n  const [address, setAddress] = useState(\"\")\n  const [phone,setPhone] = useState(\"\")\n  const [roomNumber,setRoomNumber] = useState(\"\")\n  const [search,setSearch] = useState(\"\")\n  const [text,setSearchText] = useState(\"\")\n  const errRef = useRef()\n\n  const USER_URL = \"https://myauthapivone.herokuapp.com/api/login\"\n  const ADD_STUDENT = \"https://myauthapivone.herokuapp.com/api/create-student\"\n  // const Student = `https://myauthapivone.herokuapp.com/api/student/${search}`\n\n   const toastData = {\n    position: \"top-right\",\n          autoClose: 4000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: false,\n          progress: undefined,\n          theme: \"dark\",\n\n  }\n\n  //Get Student Data\n  \n    const fetchData = async(URL)=>{\n      setLoading(true)\n      try{\n      const data = await api.get(URL)\n      if(data.data.student){\n        localStorage.setItem(\"studentdata\",JSON.stringify(data.data.student))\n        setData(data.data.student)\n        console.log(data)\n      }else{\n        setData([])\n      }\n      }catch(error){\n        setError(error.response)\n      }\n      setLoading(false)\n    }\n\n    //Get User\n\n     const fetchUser = async(url)=>{\n      setLoading(true)\n      try {\n        const userdata = await api.get(url)\n        setLogged(userdata.data.data.user)\n      } catch (error) {\n        setLogged(\"\")\n        toast.error(error.response.data.message)\n      }\n      setLoading(false)\n     }\n\n   \n    useEffect(() => {\n      if(!search) return\n      fetchData(`/student/${search}`)\n      setMessages(\" There is no student by the name of  \" + search)\n\n    },[search]);\n\n    const ResetData = () =>{\n        fetchData(\"/students\")\n        setSearch(\"\")\n     }\n\n  \n  const handleLogout = async () => {\n    signOut();\n    toast.success(\"You have been logged out\",toastData)\n    nagivate(\"/\")\n  }\n\n\n  const handleStudent = async(e) => {\n    e.preventDefault()\n    try {\n     \n      const student = {\n        studentId,\n        roomNumber,\n        firstname,\n        lastname,\n        middlename,\n        dob,\n        address,\n        phone\n      }\n      const addStudent = await api.post(\"/create-student\",JSON.stringify(student))\n      console.log(addStudent)\n      if(addStudent.data.status.success = \"success\"){\n        nagivate(\"/dashboard\")\n        toast.success(\"The student was added to the database!\")\n      }else{\n        toast.error(\"Unable to add student\",toastData)\n      } \n    } catch (error) {\n      console.log(error.response.data.message)\n      toast.error(error.response.data.message)\n    }\n  }\n  return (\n    <AppContext.Provider\n      value={{\n        toastData,\n        USER_URL,\n        signIn,\n        signOut,\n        // postData,\n        ResetData,\n        fetchData,\n        fetchUser,\n        text,\n        setSearchText,\n        setSearch,\n        search,\n        roomNumber,\n        setRoomNumber,\n        phone,\n        setPhone,\n        getdata,\n        setData,\n        setActive,\n        active,\n        setError,\n        error,\n        success,\n        email,\n        setEmail,\n        password,\n        setPassword,\n        setMessages,\n        smessages,\n        // handleLogin,\n        handleLogout,\n        errRef,\n        loading,\n        studentId,\n        firstname,\n        lastname,\n        middlename,\n        dob,\n        address,\n        setFirstName,\n        setLastName,\n        setAddress,\n        setMiddleName,\n        onChange,\n        setStudentId,\n        handleStudent,\n        fetchData,\n        logged\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  )\n}\nexport const useGlobalContext = () => {\n  return useContext(AppContext)\n}\nexport {AppContext, AppProvider}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}